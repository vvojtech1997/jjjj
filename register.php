<?php require_once 'includes/db_connect.php'; include 'includes/header_footer.php'; $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $email=$mysqli->real_escape_string($_POST['email']); $name=$mysqli->real_escape_string($_POST['name']??''); $pass=$_POST['password']??''; $conf=$_POST['confirm']??''; if($pass!==$conf) $msg='Heslá sa nezhodujú.'; else{ $hash=password_hash($pass,PASSWORD_DEFAULT); $stmt=$mysqli->prepare("INSERT INTO users (email,password,name,persons_default,created_at) VALUES (?,?,?,?,NOW())"); $pd=2; $stmt->bind_param('sssi',$email,$hash,$name,$pd); if($stmt->execute()) header('Location:/login.php'); else $msg='Registrácia zlyhala.'; } } ?>
<h2>Registrácia</h2><?php if($msg) echo '<p class="error">'.h($msg).'</p>'; ?>
<form method="post"><input name="name" placeholder="Meno"><input name="email" placeholder="E-mail" required><input name="password" type="password" placeholder="Heslo" required><input name="confirm" type="password" placeholder="Potvrď heslo" required><button class="btn-primary">Vytvoriť účet</button></form>
<?php include 'includes/footer_bottom.php'; ?>